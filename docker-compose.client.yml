version: '3'

networks:
  tickdocker_influxnet:
    external: true

services:
  telegraf:
    image: telegraf:1.5.2
    restart: unless-stopped
    command: --config-directory etc/telegraf/telegraf.d
    volumes:
      - ./etc/telegraf/telegraf.conf:/etc/telegraf/telegraf.conf:ro
      - ./etc/telegraf/telegraf.d:/etc/telegraf/telegraf.d:ro
      - /var/run/docker.sock:/var/run/docker.sock
    expose:
      - "8092"
      - "8094"
      - "8125"
    networks:
      - tickdocker_influxnet
